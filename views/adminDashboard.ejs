<%- include("partials/_header") -%>
    <div class="all-title-box">
        <div class="container text-center">
            <h1>
                <%= user.firstname %>
                    <%= user.lastname %><span class="m_1">
                            <%= user.role %> at SmartEdu
                        </span>
            </h1>
        </div>

    </div>
    <div id="overviews" class="section wb dashboard">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <% if (flashMessages) { %>
                        <% if (flashMessages.success) { %>
                            <div class="alert alert-success">
                                <%= flashMessages.success %>
                            </div>

                            <% } else if (flashMessages.error) { %>
                                <div class="alert alert-danger">
                                    <%= flashMessages.error %>
                                </div>
                                <% } %>

                                    <% } %>
                </div>
            </div>
            <div class="row">
                
                    <h2 class='dt display-6'>List of users</h2>
                        <table class="table close0">
                            <thead class="thead-dark">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Id</th>
                                    <th scope="col">Username</th>
                                    <th scope="col">First Name</th>
                                    <th scope="col">Last Name</th>
                                    <th scope="col">Role</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% for( let index=0; index < users.length; index++ ) { %>
                                    <tr>
                                        <th scope="row">
                                            <%= index+1%>
                                        </th>
                                        <td>
                                            <%= users[index]._id %>
                                        </td>
                                        <td>
                                            <%= users[index].username %>
                                        </td>
                                        <td>
                                            <%= users[index].firstname %>
                                        </td>
                                        <td>
                                            <%= users[index].lastname %>
                                        </td>
                                        <td>
                                            <%= users[index].role %>
                                        </td>
                                        <td>
                                            <%= users[index].email %>
                                        </td>
                                        <td><a class='btn btn-danger rounded-0 text-white'
                                                href="/admin/delete/user/<%= users[index]._id %>?_method=DELETE"
                                                onclick="return confirm('Are You Sure')"><span>Delete</span></a></td>
                                    </tr>
                                    <% } %>
                            </tbody>
                        </table>
               
            </div>
                <div class="row">
                    <h2 class='dt display-6'>List of Categories</h2>
                        <table class="table close0">
                            <caption><button class='btn btn-info' data-toggle="modal" data-target="#addCategory">Add</button></caption>
                            <thead class="thead-dark">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Id</th>
                                    <th scope="col">Name</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% for( let index=0;index<categories.length; index++ ) { %>
                                    <tr>
                                        <th scope="row">
                                            <%= index+1%>
                                        </th>
                                        <td>
                                            <%= categories[index]._id %>
                                        </td>
                                        <td>
                                            <%= categories[index].name %>
                                        </td>
                                        <td><a class='btn btn-danger rounded-0 text-white'
                                                href="/admin/delete/category/<%= categories[index]._id %>?_method=DELETE"
                                                onclick="return confirm('Are You Sure')"><span>Delete</span></a></td>
                                    </tr>
                                    <% } %>


                            </tbody>
                        </table>
                    



            </div>
        </div>
        <!-- end container -->
    </div>
    <div class="modal fade" id="addCategory" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-body customer-box">
                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div class="tab-pane active" id="Login">
                            <form method="POST" action="/categories/create" class="form-horizontal">
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <input type="text" name="name" class="form-control"  placeholder="Category Name" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <input type="hidden" name="role" class="form-control" value="<%= user.role %>" />
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-sm-10">
                                        <button type="submit" class="btn btn-light btn-radius btn-brd grd1">Submit</button>
                                        <button
                                            type="submit"
                                            class="btn btn-light btn-radius btn-brd grd1"
                                            data-dismiss="modal"
                                            aria-hidden="true"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- end section -->
    <script src="/js/adminPanel.js"></script>
    <%- include('partials/_footer') %>;